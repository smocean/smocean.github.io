<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="keywords" content="JavaScript, Linter, Linting, Pluggable, Configurable, Code Quality">
  <meta name="description" content="A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease.">

    
        <title>Rule max-nested-callbacks - ESLint - Pluggable JavaScript linter</title>
    


  <link href="http://eslint.org/docs/rules/max-nested-callbacks" rel="canonical" />
  <link rel="stylesheet" href="/styles/main.936b04d2.css"/>
  <link rel="stylesheet" href="/styles/ads.css"/>
  <link rel="stylesheet" href="/styles/search.css"/>
  <link rel="stylesheet" href="/styles/overrides.css"/>
  <link rel="icon" href="/img/favicon.512x512.png">
  <link rel="alternate" type="application/rss+xml" title="ESLint - Pluggable JavaScript linter" href="http://eslint.org/feed.xml">
<script>
  /*(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60915033-1', 'eslint.org');
  ga('send', 'pageview');*/

</script>
  <!--<script src="//use.edgefonts.net/source-sans-pro:n3,n4,n6,n7.js"></script>-->
  <script src="https://cdn.jsdelivr.net/g/lodash@3.10.1,hogan.js@3.0.2,algoliasearch@3.8.1,autocomplete.js@0.12.0(autocomplete.min.js)"></script>

</head>
<body>



<input type="checkbox" id="eslint-toggle-search" class="eslint-toggle-search-checkbox" />
<header class="navbar navbar-default navbar-demo navbar-fixed-top eslint-nav" id="top" role="banner">
  <div class="container">

    <a href="/" class="navbar-brand"><img alt="ESLint" src="/img/logo.svg" itemprop="image">ESLint</a>

    <div class="eslint-navbar-toggles">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#eslint-navbar" aria-controls="eslint-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>
    </div>

    <nav id="eslint-navbar" class="collapse navbar-collapse eslint-navbar">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">User guide<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/docs/user-guide/configuring">Configuring ESLint</a></li>
            <li><a href="/docs/user-guide/command-line-interface">Command Line Interface</a></li>
            <li><a href="/docs/rules/">Rules</a></li>
            <li class="divider"></li>
            <li><a href="/docs/user-guide/migrating-to-1.0.0">Migrating to v1.0.0</a></li>
            <li><a href="/docs/user-guide/integrations">Integrations</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Developer guide<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/docs/developer-guide/architecture">Architecture</a></li>
            <li><a href="/docs/developer-guide/contributing">Contributing</a></li>
            <li><a href="/docs/developer-guide/source-code">Get the Source Code</a></li>
            <li><a href="/docs/developer-guide/development-environment">Setup a Development Environment</a></li>
            <li><a href="/docs/developer-guide/unit-tests">Run the Unit Tests</a></li>
            <li><a href="/docs/developer-guide/working-with-rules">Working with Rules</a></li>
            <li><a href="/docs/developer-guide/working-with-plugins">Working with Plugins</a></li>
            <li><a href="/docs/developer-guide/shareable-configs">Shareable Configs</a></li>
            <li><a href="/docs/developer-guide/nodejs-api">Node.js API</a></li>
            <li><a href="/docs/developer-guide/governance">Governance Model</a></li>
          </ul>
        </li>
        <li><a href="/blog/">Blog</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Demo<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/demo/">ESLint Demo</a></li>
            <li><a href="/parser/">Espree Demo</a></li>
          </ul>
        </li>
        <li><a href="/docs/about/">About</a></li>
      </ul>

      <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open">
        <span class="sr-only">Open search</span>
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </label>

      <div class="navbar-form navbar-right eslint-search" role="search">
        <div class="input-group">
          <label class="sr-only" aria-label="Search" for="eslint-search-input">Search</label>
          <div class="eslint-search-input-wrapper">
            <input type="text" class="form-control" id="eslint-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search the docs...">
            <label for="eslint-toggle-search" class="eslint-toggle-search-close">
              <span class="sr-only">Close search</span>
              <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
            </label>
          </div>
        </div>
      </div>
    </nav>

  </div><!-- /.container -->
</header><!-- /.navbar -->

<main class="doc">
  <article class="container">
    <script>
if (document.documentElement.clientWidth > 870) {
document.write('<script async src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=eslintorg" id="_carbonads_js"><\/script>');
}
</script>

    <!-- Note: No pull requests accepted for this file. See README.md in the root directory for details. -->

<h1>Set Maximum Depth of Nested Callbacks (max-nested-callbacks)</h1>

<h1>设置回调函数最大嵌套深度 (max-nested-callbacks)</h1>

<p>Many JavaScript libraries use the callback pattern to manage asynchronous operations. A program of any complexity will most likely need to manage several asynchronous operations at various levels of concurrency. A common pitfall that is easy to fall into is nesting callbacks, which makes code more difficult to read the deeper the callbacks are nested.</p>

<p>很多Javascript类库是试用回调模式处理异步操作。任何复杂的程序都将最有可能在不同级别的并发性下处理多个异步回调操作。一个最长见的隐患就是嵌套的回调，使得代码嵌套层级越深越难以阅读。</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">foo</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">bar</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">baz</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">qux</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h2>Rule Details</h2>

<p>This rule is aimed at increasing code clarity by discouraging deeply nesting callbacks. As such, it will warn when callbacks are nested deeper than the specified limit.</p>

<p>该规则旨在通过阻止深层次的嵌套回调，来提高代码的清晰度。因此，如果回调函数嵌套的深度超过指定的限制，该规则将发出警告。</p>

<h3>Options</h3>

<p>The default max depth for this rule is 10. You can define the depth as an option by using the second argument in your configuration. For example, this sets the rule as an error (code is 2) with a maximum depth of 3:</p>

<p>该规则默认的最大深度是10。你可以通过在你的配置中使用第二个参数作为一个选项定义这个深度值。例如，以下将设置规则为错误(代码为2)，最大深度为3：     </p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"max-nested-callbacks"</span><span class="err">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>The following patterns are considered problems:</p>

<p>以下模式被认为是有问题的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/*eslint max-nested-callbacks: [2, 3]*/</span>

<span class="nx">foo</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">bar</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">baz</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">qux</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/*error Too many nested callbacks (4). Maximum allowed is 3.*/</span>

            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>The following patterns are not considered problems:</p>

<p>以下模式被认为是没有问题的</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/*eslint max-nested-callbacks: [2, 3]*/</span>

<span class="nx">foo</span><span class="p">(</span><span class="nx">handleFoo</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">handleFoo</span> <span class="p">(){</span>
    <span class="nx">bar</span><span class="p">(</span><span class="nx">handleBar</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleBar</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">baz</span><span class="p">(</span><span class="nx">handleBaz</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleBaz</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">qux</span><span class="p">(</span><span class="nx">handleQux</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleQux</span><span class="p">()</span> <span class="p">{</span>

<span class="p">}</span>
</code></pre></div>
<h2>Further Reading</h2>

<ul>
<li><a href="http://book.mixu.net/node/ch7.html">Control flow in Node.js</a></li>
<li><a href="http://howtonode.org/control-flow">Control Flow in Node</a></li>
<li><a href="http://howtonode.org/control-flow-part-ii">Control Flow in Node Part II</a></li>
</ul>

<h2>Related Rules</h2>

<ul>
<li><a href="complexity">complexity</a></li>
<li><a href="max-depth">max-depth</a></li>
<li><a href="max-len">max-len</a></li>
<li><a href="max-params">max-params</a></li>
<li><a href="max-statements">max-statements</a></li>
</ul>

<h2>Version</h2>

<p>This rule was introduced in ESLint 0.2.0.</p>

<p>该规则在ESLint 0.2.0 中被引入。</p>

<h2>Resources</h2>

<ul>
<li><a href="https://github.com/eslint/eslint/tree/master/lib/rules/max-nested-callbacks.js">Rule source</a></li>
<li><a href="https://github.com/eslint/eslint/tree/master/docs/rules/max-nested-callbacks.md">Documentation source</a></li>
</ul>

  </article>
</main>

    <hr>

    <div class="container">

      <footer>
        <ul class="list-inline">
          <li><a href="https://groups.google.com/group/eslint">Mailing List</a></li>
          <li><a href="https://github.com/eslint/eslint">GitHub</a></li>
          <li><a href="https://twitter.com/geteslint">Twitter</a></li>
          <li>Copyright &copy; 2013-2015 Nicholas C. Zakas. All rights reserved.</li>
        </ul>
      </footer>
    </div><!-- /.container -->


  <script id="suggestion-item-template" type="text/template">
  
  {{#isCategoryHeader}}<div class="suggestion-category">{{{category}}}</div>{{/isCategoryHeader}}
  <div class="suggestion {{#isCategoryHeader}}suggestion-is-category-header{{/isCategoryHeader}}">
    <div class="suggestion-subcategory-main">{{#isSubcategoryHeader}}{{{subcategory}}}{{/isSubcategoryHeader}}</div>
    <div class="suggestion-content">
      <div class="suggestion-subcategory-secondary">{{{subcategory}}}</div>
      <div class="suggestion-title">{{{title}}}</div>
      <div class="suggestion-text">{{{text}}}</div>
    </div>
  </div>
  
  </script>

  <script src="/js/vendor/jquery-1.10.2.min.js"></script>
  <script src="/js/vendor/bootstrap.min.js"></script>
  <script src="/js/vendor/anchor.min.js"></script>
  <script src="/js/app/search.js"></script>
  <script>
    $(document).ready(function() {
      anchors.add('.doc h2, .doc h3, .doc h4, .blog h2, .blog h3, .blog h4');
      
    });
  </script>
</body>
</html>

